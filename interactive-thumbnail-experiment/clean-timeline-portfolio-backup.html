<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clean Portfolio Thumbnail - Gym Data Dashboard</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          sans-serif;
        background: #1a1a1a;
        padding: 40px;
        color: white;
      }

      .portfolio-container {
        max-width: 1400px;
        margin: 0 auto;
        background: #2a2a2a;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      h1 {
        text-align: center;
        margin-bottom: 40px;
        color: #fff;
        font-size: 2.5rem;
      }

      .timeline-thumbnail {
        width: 100%;
        height: 500px;
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        cursor: pointer;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        transition: transform 0.3s ease;
      }

      .timeline-thumbnail:hover {
        /* ãƒ›ãƒãƒ¼åŠ¹æœã‚’å‰Šé™¤ */
      }

      /* ç´”ç²‹ãªç©ºã®å…‰è¡¨ç¾ - æ–‡å­—ãªã— */
      .sky-frame {
        width: 100%;
        height: 60%;
        position: relative;
        transition: background 1.2s cubic-bezier(0.25, 0.1, 0.25, 1);
        /* åˆæœŸçŠ¶æ…‹ï¼šæ­£åˆã®ç©º - ãƒ¢ãƒãƒˆãƒ¼ãƒ³ */
        background: linear-gradient(
          135deg,
          #b0b0b0 0%,
          #d0d0d0 50%,
          #f0f0f0 100%
        );
      }

      /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰é·ç§»åŠ¹æœ - ã‚ˆã‚Šã‚†ã£ãŸã‚Š */
      .sky-frame.dark-mode-transition {
        transform: scale(1.002);
        box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.15);
        transition: all 0.8s cubic-bezier(0.25, 0.1, 0.25, 1);
      }

      .sky-frame.dark-mode-active {
        transform: scale(1);
        box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.3);
        transition: all 0.8s cubic-bezier(0.25, 0.1, 0.25, 1);
      }

      /* æ™‚é–“å¸¯ã”ã¨ã®ç©ºã®è‰² - ãƒ¢ãƒãƒˆãƒ¼ãƒ³ */
      .sky-frame.midnight {
        background: linear-gradient(
          135deg,
          #1a1a1a 0%,
          #2d2d2d 50%,
          #404040 100%
        );
      }

      .sky-frame.dawn {
        background: linear-gradient(
          135deg,
          #505050 0%,
          #707070 50%,
          #909090 100%
        );
      }

      .sky-frame.morning {
        background: linear-gradient(
          135deg,
          #808080 0%,
          #a0a0a0 50%,
          #c0c0c0 100%
        );
      }

      .sky-frame.midday {
        background: linear-gradient(
          135deg,
          #b0b0b0 0%,
          #d0d0d0 50%,
          #f0f0f0 100%
        );
      }

      .sky-frame.afternoon {
        background: linear-gradient(
          135deg,
          #a0a0a0 0%,
          #c0c0c0 50%,
          #e0e0e0 100%
        );
      }

      .sky-frame.evening {
        background: linear-gradient(
          135deg,
          #707070 0%,
          #909090 50%,
          #b0b0b0 100%
        );
      }

      .sky-frame.dusk {
        background: linear-gradient(
          135deg,
          #505050 0%,
          #707070 50%,
          #909090 100%
        );
      }

      .sky-frame.night {
        background: linear-gradient(
          135deg,
          #2d2d2d 0%,
          #404040 50%,
          #505050 100%
        );
      }

      /* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ */
      .timeline-bar {
        position: absolute;
        bottom: 80px;
        left: 5%;
        right: 5%;
        height: 4px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
      }

      .timeline-progress {
        height: 100%;
        background: linear-gradient(
          90deg,
          #ffeb3b 0%,
          #2196f3 50%,
          #9c27b0 100%
        );
        border-radius: 2px;
        width: 0%;
        transition: width 0.3s ease;
      }

      .time-markers {
        position: absolute;
        bottom: 60px;
        left: 5%;
        right: 5%;
        display: flex;
        justify-content: space-between;
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9rem;
      }

      /* ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */
      .dashboard-preview {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: auto;
        height: 60%;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: visible;
        z-index: 10;
      }

      .dashboard-screenshot {
        width: 120px;
        height: 100%;
        border-radius: 8px;
        overflow: hidden;
        position: relative;
        /* box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4); */
      }

      .dashboard-screenshot img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        opacity: 1;
      }

      /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‰Šé™¤æ¸ˆã¿ */

      /* ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒåˆ©ç”¨ã§ããªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
      .dashboard-screenshot.fallback {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 1.1rem;
        border: 2px solid rgba(255, 255, 255, 0.1);
        text-align: center;
      }

      .dashboard-screenshot.fallback .placeholder-icon {
        font-size: 3rem;
        margin-bottom: 10px;
        opacity: 0.7;
      }

      .dashboard-screenshot.fallback .placeholder-text {
        font-size: 1rem;
        opacity: 0.8;
        margin-bottom: 5px;
      }

      .dashboard-screenshot.fallback .placeholder-subtext {
        font-size: 0.8rem;
        opacity: 0.6;
      }

      /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆåŠ¹æœ */
      .dashboard-screenshot.dark-mode {
        /* ã‚·ãƒ£ãƒ‰ã‚¦ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åŠ¹æœã‚’å‰Šé™¤ */
      }

      .dashboard-screenshot.dark-mode.fallback {
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d30 100%);
        border-color: rgba(255, 255, 255, 0.2);
      }

      /* ãƒ›ãƒãƒ¼åŠ¹æœã‚’å‰Šé™¤ */

      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
      @media (max-width: 768px) {
        .timeline-thumbnail {
          height: 400px;
        }
      }
    </style>
  </head>
  <body>
    <div class="portfolio-container">
      <h1>ğŸŒŒ Gym Data Dashboard - ã‚¯ãƒªãƒ¼ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«</h1>

      <div class="timeline-thumbnail" id="timelineThumbnail">
        <!-- ç´”ç²‹ãªç©ºã®å…‰è¡¨ç¾ï¼ˆæ–‡å­—ãªã—ï¼‰ -->
        <div class="sky-frame" id="skyFrame"></div>

        <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ -->
        <div class="timeline-bar">
          <div class="timeline-progress" id="timelineProgress"></div>
        </div>

        <div class="time-markers">
          <span>0:00</span>
          <span>6:00</span>
          <span>12:00</span>
          <span>18:00</span>
          <span>24:00</span>
        </div>

        <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
        <div class="dashboard-preview">
          <div class="dashboard-screenshot fallback" id="dashboardPreview">
            <div class="placeholder-icon">ğŸ“Š</div>
            <div class="placeholder-text">Gym Analytics Dashboard</div>
            <div class="placeholder-subtext">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ··é›‘çŠ¶æ³ãƒ‡ãƒ¼ã‚¿</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      class CleanTimelinePortfolioThumbnail {
        constructor() {
          this.thumbnail = document.getElementById('timelineThumbnail');
          this.skyFrame = document.getElementById('skyFrame');
          this.progress = document.getElementById('timelineProgress');
          this.dashboardPreview = document.getElementById('dashboardPreview');

          this.isDarkMode = false;
          this.currentHour = 12; // åˆæœŸã¯æ­£åˆ12æ™‚
          this.currentImageMode = 'light'; // ç¾åœ¨è¡¨ç¤ºä¸­ã®ç”»åƒãƒ¢ãƒ¼ãƒ‰

          // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç®¡ç†
          this.screenshots = {
            light: 'assets/dashboard-light.png',
            dark: 'assets/dashboard-dark.png',
          };
          this.screenshotLoaded = { light: false, dark: false };
          this.loadedImages = { light: null, dark: null };

          this.init();
        }

        init() {
          this.setupMouseInteraction();
          this.setupInitialState();
          this.loadDashboardScreenshots();
          console.log('ğŸŒŒ Clean Timeline Portfolio Thumbnail initialized!');
        }

        /**
         * ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ãƒ­ãƒ¼ãƒ‰
         */
        async loadDashboardScreenshots() {
          console.log('ğŸ“¸ Loading dashboard screenshots...');

          // ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã¨ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ä¸¡æ–¹ã‚’ãƒ­ãƒ¼ãƒ‰
          try {
            const lightImg = await this.loadImage(this.screenshots.light);
            this.loadedImages.light = lightImg;
            this.screenshotLoaded.light = true;
            console.log('âœ… Light mode screenshot loaded');
          } catch (error) {
            console.log('âš ï¸ Light mode screenshot not available');
          }

          try {
            const darkImg = await this.loadImage(this.screenshots.dark);
            this.loadedImages.dark = darkImg;
            this.screenshotLoaded.dark = true;
            console.log('âœ… Dark mode screenshot loaded');
          } catch (error) {
            console.log('âš ï¸ Dark mode screenshot not available');
          }

          // åˆæœŸè¡¨ç¤ºè¨­å®šï¼ˆãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰
          if (this.screenshotLoaded.light) {
            this.setupScreenshotDisplay(this.loadedImages.light, false);
          } else {
            this.setupFallbackDisplay();
          }
        }

        /**
         * ç”»åƒã‚’éåŒæœŸã§ãƒ­ãƒ¼ãƒ‰
         */
        loadImage(src) {
          return new Promise((resolve, reject) => {
            const img = new Image();
            img.onload = () => resolve(img);
            img.onerror = () => reject(new Error(`Failed to load ${src}`));
            img.src = src;
          });
        }

        /**
         * ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆè¡¨ç¤ºã‚’è¨­å®šï¼ˆæ»‘ã‚‰ã‹ãªåˆ‡ã‚Šæ›¿ãˆã¨ã¨ã‚‚ã«ï¼‰
         */
        setupScreenshotDisplay(img, isDark = false) {
          // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ã§å³åº§ã«ç”»åƒã‚’å…¥ã‚Œæ›¿ãˆ
          this.replaceImage(img, isDark);
        }

        /**
         * ç”»åƒã‚’å…¥ã‚Œæ›¿ãˆ
         */
        replaceImage(img, isDark) {
          this.dashboardPreview.innerHTML = '';
          this.dashboardPreview.classList.remove('fallback');

          const imgElement = img.cloneNode();
          imgElement.alt = 'Gym Analytics Dashboard Screenshot';
          this.dashboardPreview.appendChild(imgElement);

          if (isDark) {
            this.dashboardPreview.classList.add('dark-mode');
          } else {
            this.dashboardPreview.classList.remove('dark-mode');
          }
        }

        /**
         * ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºã‚’è¨­å®š
         */
        setupFallbackDisplay() {
          this.dashboardPreview.classList.add('fallback');
          this.updateFallbackContent(false);
        }

        /**
         * ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å†…å®¹ã‚’æ›´æ–°
         */
        updateFallbackContent(isDarkMode) {
          if (!this.dashboardPreview.classList.contains('fallback')) return;

          const icon = this.dashboardPreview.querySelector('.placeholder-icon');
          const text = this.dashboardPreview.querySelector('.placeholder-text');
          const subtext = this.dashboardPreview.querySelector(
            '.placeholder-subtext',
          );

          if (isDarkMode) {
            icon.textContent = 'ğŸŒ™';
            text.textContent = 'Gym Analytics Dashboard (Dark)';
            subtext.textContent = 'å¤œé–“ãƒ¢ãƒ¼ãƒ‰ - æ··é›‘çŠ¶æ³ãƒ‡ãƒ¼ã‚¿';
            this.dashboardPreview.classList.add('dark-mode');
          } else {
            icon.textContent = 'ğŸ“Š';
            text.textContent = 'Gym Analytics Dashboard (Light)';
            subtext.textContent = 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ··é›‘çŠ¶æ³ãƒ‡ãƒ¼ã‚¿';
            this.dashboardPreview.classList.remove('dark-mode');
          }
        }

        setupInitialState() {
          // åˆæœŸçŠ¶æ…‹ï¼šæ­£åˆ12æ™‚
          this.updateBackgroundGradient(12);
        }

        setupMouseInteraction() {
          let throttleTimeout = null;
          
          this.thumbnail.addEventListener('mousemove', (e) => {
            // ãƒ‡ãƒã‚¦ãƒ³ã‚¹å‡¦ç†ã§æ»‘ã‚‰ã‹ã«
            if (throttleTimeout) return;
            
            throttleTimeout = setTimeout(() => {
              const rect = this.thumbnail.getBoundingClientRect();
              const x = e.clientX - rect.left;
              const progress = Math.max(0, Math.min(1, x / rect.width));

              // 0æ™‚ã‹ã‚‰24æ™‚ã¾ã§ã®æ™‚é–“ç¯„å›²ï¼ˆå·¦ç«¯=0æ™‚ã€å³ç«¯=24æ™‚ï¼‰
              const hour = progress * 24;
              this.currentHour = hour;

              this.updateBackgroundGradient(hour);
              this.updateDarkModeTransition(hour);
              this.updateDashboardMode(hour);

              // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹æ›´æ–°
              this.progress.style.width = `${progress * 100}%`;
              
              throttleTimeout = null;
            }, 50); // 50msé–“éš”ã§ã‚¹ãƒ­ãƒƒãƒˆãƒ«
          });

          this.thumbnail.addEventListener('mouseleave', () => {
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ­£åˆã®çŠ¶æ…‹ã«æˆ»ã‚‹
            this.resetToDefault();
          });
        }

        updateBackgroundGradient(hour) {
          const timeOfDay = this.getTimeOfDay(hour);

          // æ—¢å­˜ã®æ™‚é–“å¸¯ã‚¯ãƒ©ã‚¹ã‚’ã™ã¹ã¦å‰Šé™¤
          const timeClasses = [
            'dawn',
            'morning',
            'midday',
            'afternoon',
            'evening',
            'dusk',
            'night',
            'midnight',
          ];
          timeClasses.forEach((cls) => this.skyFrame.classList.remove(cls));

          // æ–°ã—ã„æ™‚é–“å¸¯ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
          this.skyFrame.classList.add(timeOfDay);
        }

        getTimeOfDay(hour) {
          if (hour >= 5 && hour < 7) return 'dawn'; // å¤œæ˜ã‘
          if (hour >= 7 && hour < 10) return 'morning'; // æœ
          if (hour >= 10 && hour < 14) return 'midday'; // æ­£åˆ
          if (hour >= 14 && hour < 17) return 'afternoon'; // åˆå¾Œ
          if (hour >= 17 && hour < 19) return 'evening'; // å¤•æ–¹
          if (hour >= 19 && hour < 21) return 'dusk'; // é»„æ˜
          if (hour >= 21 || hour < 2) return 'night'; // å¤œ
          return 'midnight'; // æ·±å¤œ (2-5æ™‚)
        }

        updateDarkModeTransition(hour) {
          const isNightTime = hour >= 18 || hour < 6;

          if (isNightTime && !this.isDarkMode) {
            this.transitionToNightMode();
          } else if (!isNightTime && this.isDarkMode) {
            this.transitionToDayMode();
          }
        }

        transitionToNightMode() {
          if (this.isDarkMode) return; // æ—¢ã«ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„

          this.isDarkMode = true;
          console.log('ğŸŒ™ Transitioning to Dark Mode...');

          // Phase 1: é·ç§»é–‹å§‹åŠ¹æœ (0-100ms)
          this.skyFrame.classList.add('dark-mode-transition');

          // Phase 2: ãƒ¡ã‚¤ãƒ³é·ç§» (100-500ms) - 0.5ç§’ã§å®Œäº†
          setTimeout(() => {
            this.skyFrame.classList.add('dark-mode-active');

            // é·ç§»åŠ¹æœã‚¯ãƒ©ã‚¹å‰Šé™¤
            setTimeout(() => {
              this.skyFrame.classList.remove('dark-mode-transition');
            }, 400);
          }, 100);
        }

        transitionToDayMode() {
          if (!this.isDarkMode) return; // æ—¢ã«ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„

          this.isDarkMode = false;
          console.log('â˜€ï¸ Transitioning to Light Mode...');

          // Phase 1: é·ç§»é–‹å§‹åŠ¹æœ (0-100ms)
          this.skyFrame.classList.add('dark-mode-transition');

          // Phase 2: ãƒ¡ã‚¤ãƒ³é·ç§» (100-500ms) - 0.5ç§’ã§å®Œäº†
          setTimeout(() => {
            this.skyFrame.classList.remove('dark-mode-active');

            // é·ç§»åŠ¹æœã‚¯ãƒ©ã‚¹å‰Šé™¤
            setTimeout(() => {
              this.skyFrame.classList.remove('dark-mode-transition');
            }, 400);
          }, 100);
        }

        updateDashboardMode(hour) {
          const isNightTime = hour >= 18 || hour <= 6;
          const targetMode = isNightTime ? 'dark' : 'light';

          // æ—¢ã«åŒã˜ãƒ¢ãƒ¼ãƒ‰ã®ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„
          if (this.currentImageMode === targetMode) {
            return;
          }

          this.currentImageMode = targetMode;

          if (isNightTime && this.screenshotLoaded.dark) {
            // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”»åƒã‚’è¡¨ç¤º
            this.setupScreenshotDisplay(this.loadedImages.dark, true);
          } else if (!isNightTime && this.screenshotLoaded.light) {
            // ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”»åƒã‚’è¡¨ç¤º
            this.setupScreenshotDisplay(this.loadedImages.light, false);
          } else {
            // è©²å½“ç”»åƒãŒãªã„å ´åˆã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤º
            this.updateFallbackContent(isNightTime);
          }
        }

        resetToDefault() {
          // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ­£åˆã®çŠ¶æ…‹ã«æˆ»ã‚‹
          this.currentHour = 12;
          this.currentImageMode = 'light'; // ç”»åƒãƒ¢ãƒ¼ãƒ‰ã‚‚ãƒªã‚»ãƒƒãƒˆ
          this.updateBackgroundGradient(12);
          this.updateDashboardMode(12);
          this.progress.style.width = '0%';

          // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰çŠ¶æ…‹ã‚‚ãƒªã‚»ãƒƒãƒˆ
          if (this.isDarkMode) {
            this.isDarkMode = false;
            this.skyFrame.classList.remove(
              'dark-mode-active',
              'dark-mode-transition',
            );
          }
        }
      }

      // åˆæœŸåŒ–
      document.addEventListener('DOMContentLoaded', () => {
        new CleanTimelinePortfolioThumbnail();
      });
    </script>
  </body>
</html>
